<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="node_modules/reveal.js/css/reveal.min.css">
        <link rel="stylesheet" href="node_modules/reveal.js/css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
        <link rel="stylesheet" href="node_modules/reveal.js/lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
            
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                <section>
                    <h1>AngularJS</h1>
                </section>
                
                <section>
                    <h2>Qu'est-ce que c'est ?</h2>
                    <p class="fragment fade-in">Encore un autre framework MVC JavaScript !</p>
                </section>

                <section>
                    <h2>Angular offre:</h2>
                    <ul>
                        <li>un cadre</li>
                        <li>une structure</li>
                        <li>des concepts</li>
                        <li class="fragment">… et des fonctionnalités</li>
                    </ul>
                </section>

                <section>
                    <h2>Les concepts, en vrac</h2>
                    <ul>
                        <li class="fragment">View</li>
                        <li class="fragment">Controllers</li>
                        <li class="fragment">Directives</li>
                        <li class="fragment">Services</li>
                        <li class="fragment">Scope</li>
                        <li class="fragment">Filters</li>
                        <li class="fragment">Modules</li>
                    </ul>
                </section>

                <section>
                    <h2>View</h2>
                    <p class="fragment">Code HTML "amélioré"</p>
                    <pre class="fragment"><code data-trim>
&lt;!DOCTYPE&gt;
&lt;html ng-app='app'&gt;
  &lt;head&gt;
    &lt;title&gt;Simple example&lt;/title&gt;
    ...
  &lt;/head&gt;
  &lt;body ng-controller=&quot;MainController as ctrl&quot;&gt;
    &lt;app-map app-map="map"&gt;&lt;/app-map&gt;
    ...
  &lt;/body&gt;
&lt;/html&gt;
                </code></pre>
                </section>

                <section>
                    <h2>Controllers</h2>
                    <p class="fragment">Rôle : ajouter des données/états et comportement au <em>scope</em>.</p>
                </section>

                <section>
                    <h2>Controllers</h2>
                    <p>Définition</p>
                    <pre class="fragment"><code data-trim>
module.controller('MainController', function($scope) {
  /**
   * @type {Array.<*>}
   */
  this.data = [
    // ...
  ];
  /**
   * @param {string} val Value.
   */
  this.setValue = function(val) {
    // ...
  };
});
                </code></pre>
                </section>

                <section>
                    <h2>Controllers</h2>
                    <p>Utilisation</p>
                    <pre class="fragment"><code data-trim>
&lt;!DOCTYPE&gt;
&lt;html ng-app='app'&gt;
  &lt;head&gt;
    &lt;title&gt;Simple example&lt;/title&gt;
    ...
  &lt;/head&gt;
  &lt;body ng-controller=&quot;MainController as ctrl&quot;&gt;
    ...
  &lt;/body&gt;
&lt;/html&gt;
                    </code></pre>
                </section>

                <section>
                    <h2>Directives</h2>
                    <p class="fragment">Composants réutilisables.</p>
                </section>

                <section>
                    <h2>Directives</h2>
                    <p>Définition</p>
                    <pre class="fragment"><code data-trim>
module.directive('MyDirective', function() {
  return {
    restrict: 'E',
    scope: {
      // ...
    },
    controller: function() {
      // ...
    },
    link: function(scope, element, attrs) {
      // ...
    }
  };
});
                    </code></pre>
                </section>

                <section>
                    <h2>Directives</h2>
                    <p>Utilisation</p>
                    <pre class="fragment"><code data-trim>
&lt;!DOCTYPE&gt;
&lt;html ng-app='app'&gt;
  &lt;head&gt;
    &lt;title&gt;Simple example&lt;/title&gt;
    ...
  &lt;/head&gt;
  &lt;body ng-controller=&quot;MainController as ctrl&quot;&gt;
    ...
    &lt;my-directive&gt;&lt;/my-directive&gt;
    ...
  &lt;/body&gt;
&lt;/html&gt;
                    </code></pre>
                </section>

                <section>
                    <h2>Services</h2>
                    <ul>
                        <li class="fragment">Objets de n'importe quel type</li>
                        <li class="fragment">Singletons</li>
                        <li class="fragment"><em>Injectables</em></li>
                    </ul>
                </section>

                <section>
                    <h2>Services</h2>
                    <p>Définition</p>
                    <pre class="fragment"><code data-trim>
module.factory('myService', function() {
  // return the service object
  return {
    ...
  };
});
                    </code></pre>
                </section>

                <section>
                    <h2>Services</h2>
                    <p class="fragment">Il y a d'autres façons de définir des services.</p>
                    <ul class="fragment">
                        <li>angular.provider (forme canonique)</li>
                        <li>angular.factory</li>
                        <li>angular.service</li>
                        <li>angular.value</li>
                        <li>anguar.constant</li>
                    </ul>
                    <br>
                    <br>
                </section>

                <section>
                    <h2>Services</h2>
                    <p>Voir <a href="http://www.frangular.com/2012/12/differentes-facons-de-creer-un-service-angularjs.html">http://www.frangular.com/2012/12/differentes-facons-de-creer-un-service-angularjs.html</a></p>
                </section>

                <section>
                    <h2>Services</h2>
                    <p>Utilisation : l'injection (a.k.a. <em>Dependency Injection</em>)</p>
                    <pre class="fragment"><code data-trim>
module.factory('myService', [$http, myOtherService,
  function($http, myOtherService) {
    ...
}]);
                    </code></pre>
                </section>

                <section>
                    <h2>Scope</h2>
                    <ul class="fragment">
                        <li>Définit le "contexte" des directives et expressions</li>
                        <li>Injectable</li>
                    </ul>
                </section>

                <section>
                    <h2>Scope</h2>
                    <p>Typiquement injecté dans les controllers.</p>
                    <pre class="fragment"><code data-trim>
module.controller('MainController', [$scope, function($scope) {
 $scope.a = {b: {c: 1}}; 
}]);
                </code></pre>
                </section>

                <section>
                    <h2>Scope</h2>
                    <p>Contexte des expressions</p>
                    <pre class="fragment"><code data-trim>
&lt;!DOCTYPE&gt;
&lt;html ng-app='app'&gt;
  &lt;head&gt;
    &lt;title&gt;Simple example&lt;/title&gt;
    ...
  &lt;/head&gt;
  &lt;body ng-controller=&quot;MainController&quot;&gt;
    ...
    &lt;p&gt;{{a.b.c + 2}}&lt;/p&gt;
    ...
  &lt;/body&gt;
&lt;/html&gt;
                </code></pre>
                </section>

                <section>
                    <h2>Filtres</h2>
                    <p>Fonctions pouvant être utilisées dans des expressions.</p>
                </section>

                <section>
                    <h2>Filtres</h2>
                    <p>Définition</p>
                    <pre class="fragment"><code data-trim>
module.filter('stringify', function() {
  return function(input) {
    return input.toString();
  };
});
                </code></pre>
                </section>

                <section>
                    <h2>Filtres</h2>
                    <p>Utilisation</p>
                    <pre class="fragment"><code data-trim>
&lt;!DOCTYPE&gt;
&lt;html ng-app='app'&gt;
  &lt;head&gt;
    &lt;title&gt;Simple example&lt;/title&gt;
    ...
  &lt;/head&gt;
  &lt;body ng-controller=&quot;MainController&quot;&gt;
    ...
    &lt;p&gt;{{a.b.c + 1 | stringify}}&lt;/p&gt;
    ...
  &lt;/body&gt;
&lt;/html&gt;
                </code></pre>
                </section>

                <section>
                    <h2>Modules</h2>
                    <p>Un module est un container des différents composants d'une application ou d'une librairie.</p>
                </section>

                <section>
                    <h2>Modules</h2>
                    <p>Récupérer une référence sur un module :</p>
                    <pre class="fragment"><code data-trim>
var appModule = angular.module('app');
                    </code></pre>
                </section>

                <section>
                    <h2>Commentaire</h2>
                    <p>La difficulté : il n'y a pas qu'une façon d'utiliser Angular !</p>
                </section>


                <section>
                    <h1>Closure</h1>
                </section>

                <section>
                    <h2>Qu'est-ce que c'est ?</h2>
                    <ul>
                        <li class="fragment">Un autre projet de Google :-)</li>
                        <li class="fragment">Une suite d'outils</li>
                        <ul class="fragment">
                            <li>Une librairie JS : <em>Closure Library</em></li>
                            <li>Un compilateur JS -> JS : <em>Closure Compiler</em></li>
                        </ul>
                    </ul>
                </section>

                <section>
                    <h2>Closure Library</h2>
                    <ul>
                        <li class="fragment">Grosse librairie JS !</li>
                        <li class="fragment">DOM, events, math, geometry, matrix, data structures…</li>
                        <li class="fragment">Faite pour fonctionner avec le compilateur</li>
                    </ul>
                </section>

                <section>
                    <h2>Closure Compiler</h2>
                    <ul>
                        <li class="fragment">Compile JS -> JS</li>
                        <li class="fragment">Vise à minimiser le nb d'octets</li>
                        <li class="fragment">Produit aussi du code efficace</li>
                        <li class="fragment">Vérification statique des types</li>
                        <li class="fragment">Créé par Google pour gérer des grosses bases de code</li>
                    </ul>
                </section>

                <section>
                    <h2>Optimisations</h2>
                    <ul>
                        <li>Renommage des variables</li>
                        <li>Renommage des propriétés des objets (danger !)</li>
                        <li>Applatissage des namespaces</li>
                        <li>Inlining des fonctions</li>
                        <li>…</li>
                    </ul>
                </section>

                <section>
                    <h2>Annotations</h2>
                    <p>Le code JS est annoté pour la vérification de type.</p>
                </section>

                <section>
                    <h2>Annotations – exemple</h2>
                    <pre><code data-trim>
/**
 * @constructor
 * @param {number} radius The circle radius.
 * @extends {Shape}
 */
 Circle = function(radius) {
   goog.base(this);

   /**
    * @type {number}
    * @private
    */
   this.radius_ = radius;
 };
 goog.inherits(Circle, Shape);
                    </code></pre>
                </section>

                <section>
                    <h2>Les annotations du compilateur</h2>
                    <a href="https://developers.google.com/closure/compiler/docs/js-for-compiler">https://developers.google.com/closure/compiler/docs/js-for-compiler</a>
                    <p>Page souvent nécessaire pour travailler avec le compilateur.</p>
                </section>

                <section>
                    <h2>Un outil unique !</h2>
                    <ul>
                        <li class="fragment">Nécessite apprentissage et expérience</li>
                        <li class="fragment">Nécessite une bonne infrastructure</li>
                        <li class="fragment">Excellent pour <em>refactorer</em> du code !</li>
                    </ul>
                </section>

                <section>
                    <h1>ngeo</h1>
                </section>

                <section>
                    <h2>Qu'est-ce que c'est ?</h2>
                    <p>Une librairie combinant OpenLayers 3 et Angular.</p>
                </section>

                <section>
                    <h2>Objectifs</h2>
                    <ul>
                        <li>Être efficaces !</li>
                        <li>Fournir des composantes réutilisables (<em>core</em> et <em>UI</em>)</li>
                        <li>Définir méthode pour développer des apps avec OL3 et Angular</li>
                    </ul>
                </section>

                <section>
                    <h2>Utilisation du compilateur</h2>
                    <p>Utilisation du compilateur en mode ADVANCED pour compiler ensemble OL3, ngeo, et l'application.</p>
                </section>

                <section>
                    <h2>État actuel</h2>
                    <ul>
                        <li class="fragment">Infrastructure en place</li>
                        <ul class="fragment">
                            <li>Compilation</li>
                            <li>Publication des exemples sur github.io</li>
                            <li>…</li>
                        </ul>
                        <li class="fragment">Quelques directives et services</li>
                    </ul>
                </section>

                <section>
                    <h2>Guidelines pour les développeurs d'apps</h2>
                    <a href="https://github.com/camptocamp/ngeo/tree/master/docs/guidelines.md">https://github.com/camptocamp/ngeo/tree/master/docs/guidelines.md</a>
                </section>

                <section>
                    <h2>Pour le moment, en résumé :</h2>
                    <ul>
                        <li class="fragment">Ne pas sur-utiliser <code>ng-controller</code></li>
                        <li class="fragment">Un <code>ng-controller</code> (<code>MainController</code>) par page !</li>
                        <li class="fragment">Utilisation de <code>controller as</code> (voir slide suivant)</li>
                        <li class="fragment">Limiter le nombre de <code>watchers</code></li>
                        <ul class="fragment">
                            <li>Attention à <code>ng-repeat</code></li>
                            <li>Utilisation des <em>one-time bindings</em> d'Angular 1.3 (<code>{{ ::title}}</code>)</li>
                        </ul>
                    </ul>
                </section>

                <section>
                    <h2>Sans <code>controller as</code></h2>
                    <pre class="fragment"><code data-trim>
&lt;div ng-controller="MainCtrl"&gt;
  {{ title }}
  &lt;div ng-controller="AnotherCtrl"&gt;
    {{ title }}
    &lt;div ng-controller="YetAnotherCtrl"&gt;
      {{ title }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
                    </code></pre>
                </section>

                <section>
                    <h2>Avec <code>controller as</code></h2>
                    <pre class="fragment"><code data-trim>
&lt;div ng-controller="MainCtrl as main"&gt;
  {{ main.title }}
  &lt;div ng-controller="AnotherCtrl as another"&gt;
    {{ another.title }}
    &lt;div ng-controller="YetAnotherCtrl as yet"&gt;
      {{ yet.title }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
                    </code></pre>
                    <p class="fragment">On sait d'où provient la donnée !</p>
                </section>

                <section>
                    <h2>Résumé concernant les guidelines</h2>
                    <p>On maîtrise bien la technique d'Angular mais on a encore à affiner nos guidelines d'utilisation.</p>
                </section>

                <section>
                    <h1>Travaux Pratiques</h1>
                </section>

                <section>
                    <h2>Organisation générale</h2>
                    <ul>
                        <li class="fragment">Dans le projet geoportailv3</li>
                        <ul class="fragment">
                            <li>Pour tester l'infrastructure</li>
                            <li>Pour être en conditions réelles</li>
                        </ul>
                        <li class="fragment">Chacun choisit un TP (pair-programming autorisé)</li>
                    </ul>
                </section>

                <section>
                    <h2>Liste des TP</h2>
                    <ol>
                        <li>Débuter un layout proche des specs</li>
                        <li>Remplacer la couche OSM par une couche de fond Lux</li>
                        <li>Développer une directive pour la gestion des couches de fond</li>
                        <li>Ajouter controls <code>ScaleLine</code> et <code>MousePosition</code> sur la carte</li>
                        <li>Faire une directive <code>MousePosition</code> pour afficher coordonnées de la souris dans un élément DOM</li>
                        <li>Développer une directive <code>app-map</code> de type <em>widget</em> (<code>restrict: "E"</code>) basé sur <code>ngeo-map</code></li>
                    </ol>
                </section>

			</div>

		</div>

        <script src="node_modules/reveal.js/lib/js/head.min.js"></script>
        <script src="node_modules/reveal.js/js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'node_modules/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'node_modules/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'node_modules/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'node_modules/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'node_modules/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'node_modules/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
